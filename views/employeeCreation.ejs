<!-- employeeCreation.ejs -->

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= __('EmployeeCreationForm') %></title>
  <!-- Bootstrap CSS CDN link -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- <link rel="stylesheet" href="css/employeeCreation.css"> -->
  <link rel="stylesheet" href="css/style1.css">
  <!-- <link rel="stylesheet" href="css/home.css"> -->

</head>

<body>
  <%- include('layouts/header1');-%>
  <%- include('layouts/naviMenu');-%>
  <!-- collapsible submenus -->
  <div class="container-fluid">
    <div class="row">
      <%- include('layouts/sidebar');-%>
      <div class="col-md-9">
        <div class="container-fluid5 mt-4">
          <form action="/process_employee_creation" method="post" enctype="multipart/form-data" id="employeecreation">
            <h3 class="mb-1"><%= __('EmployeeCreationForm') %></h3>
            <div class="col-md-5  offset-md-8">
              <button type="button " class="btn btn-primary" onclick="validateAndSubmit()" > <%= __('Save') %></button>
              <button type="submit" class="btn btn-success" style="display: none;"><%= __('NewEmployee') %> </button>
              <button type="button" class="btn btn-danger"  onclick="cancelAction()"><%= __('Cancel') %></button>
            </div>
            <div class="row">
              <div class="col-md-4">
                <div>
                  <label for="employeeId" class="form-label"><%= __('EMPLOYEE_ID') %>:</label>
                  <input type="text" id="employeeId1" name="employeeId" value="<%= employeeId %>" class="form-control" required>
                </div>
                <div id="employeeIdError" class="text-danger">
                <%= errorMessage %>
              </div>
                <div>
                  <label for="first_name" class="form-label"><%= __('FirstName') %>:</label>
                  <input type="text" id="first_name" name="first_name" class="form-control" required >
                  <small id="firstnameError" class="text-danger" style="display: none;">First Name is required</small>
                </div>
                <div>
                  <label for="last_name" class="form-label"><%= __('LastName') %>:</label>
                  <input type="text" id="last_name" name="last_name" class="form-control" required >
                  <small id="lastnameError" class="text-danger" style="display: none;">Last Name is required</small>
                </div>
                <div>
                  <label for="gender" class="form-label"><%= __('Gender') %>:</label>
                  <select id="gender" name="gender" class="form-select">
                    <option value="Male"><%= __('Male') %></option>
                    <option value="Female"><%= __('Female') %></option>
                  </select>
                </div>
                <!-- Employee ID -->
                <div>
                  <label for="contact_number" class="form-label"><%= __('ContactNumber') %>:</label>
                  <input type="tel" id="contact_number" name="contact_number" class="form-control" required  >
                  <small id="contactnumberError" class="text-danger" style="display: none;">Contact Number is required</small>
                </div>
                <div>
                  <label for="emergency_contact_number" class="form-label"><%= __('EmergencyContactNumber') %>:</label>
                  <input type="text" id="emergency_contact_number" name="emergency_contact_number" class="form-control" required>
                    <small id="emergencycontactnumberError" class="text-danger" style="display: none;">Emergency Contact Number  is required</small>
                </div>
              </div>
              <div class="col-md-4">
                <div>
                  <label for="manager_name" class="form-label"><%= __('ManagerName') %>:</label>
                  <input type="text" id="manager_name" name="manager_name" class="form-control">
                </div>

                <div>
                  <label for="office_email" class="form-label"><%= __('OfficeEmail') %>:</label>
                  <input type="email" id="office_email" name="office_email" class="form-control" required>
                  <small id="OfficeEmailError" class="text-danger" style="display: none;">Office Email is required</small>                 
                </div>

                <div>
                  <label for="personal_email" class="form-label"><%= __('PersonalEmail') %>:</label>
                  <input type="email" id="personal_email" name="personal_email" class="form-control" required>
                  <small id="PersonalEmailError" class="text-danger" style="display: none;">Personal Email is required</small>
                </div>
                <div>
                  <label for="department" class="form-label"><%= __('Department') %>:</label>
                  <input type="text" id="department" name="department" class="form-control" >
                </div>

                <!-- Employee ID -->
                <div>
                  <label for="current_address" class="form-label"><%= __('CurrentAddress') %>:</label>
                  <textarea  id="current_address" name="current_address"
                    class="form-control"></textarea>
                </div>

                <!-- Permanent Address -->
                <div>
                  <label for="permanent_address" class="form-label"><%= __('PermanentAddress') %>:</label>
                  <textarea  id="permanent_address" name="permanent_address"
                    class="form-control"></textarea>
                </div>

              </div>
              <!-- Employee Image -->
              <div class="col-md-4 ">
                <div>
                  <img class="upload_img" id="uploaded_image" src="#" alt="Uploaded Image" style="height:80px; width: 60px; display:none;">
                  <label for="emp_image" class="form-label"><%= __('EmployeeImage') %>:</label>
                  <input type="file" id="emp_image" name="emp_image" accept=".png, .jpg, .jpeg" class="form-control">
                  <small id="imageError" class="text-danger" style="display: none;">image is required</small>

                </div>
                <div>
                  <label for="emp_image_name" class="form-label"><%= __('ImageFilename') %>:</label>
                  <input type="text" id="emp_image_name" name="emp_image_name" class="form-control">
                </div>

                
               <!-- Employee Rank -->
                <div>
                  <label for="job_location" class="form-label"><%= __('JobLocation') %>:</label>
                  <input type="text" id="job_location" name="job_location" class="form-control">
                </div>

                <!-- Hire Date -->
                <div>
                  <label for="hire_date" class="form-label"><%= __('HireDate') %>:</label>
                  <input type="date" id="hire_date" name="hire_date" class="form-control" required>
                  <small id="hireDateError" class="text-danger" style="display: none;">Hire Date is required</small>
                </div>
                <div>
                  <label for="start_date" class="form-label"><%= __('StartDate') %>:</label>
                  <input type="date" id="start_date" name="start_date" class="form-control" required>
                  <small id="startDateError" class="text-danger" style="display: none;">Start Date is required</small>
                </div>
                
                 <!-- Job Position -->
                <div>
                  <label for="job_position" class="form-label"><%= __('JobPosition') %>:</label>
                  <input type="text" id="job_position" name="job_position" class="form-control">
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div> 


    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Inside your script tag in employeeCreation.ejs
      function readURL(input) {
        if (input.files && input.files[0]) {
          var reader = new FileReader();

          reader.onload = function (e) {
            $('#uploaded_image').attr('src', e.target.result).show();
          }

          reader.readAsDataURL(input.files[0]);
        }
      }

      // Trigger the function when a file is selected
      $("#emp_image").change(function () {
        readURL(this);

        // Set the value of the filename input
        var filename = $("#emp_image").val().split("\\").pop();
        $("#emp_image_name").val(filename);
      });
    </script>
    <%- include('layouts/script');-%>
    <script>
      function cancelAction() {
        window.location.href = '/home'; // Redirect to the home page
      }
    </script>
    
<script>
  function validateAndSubmit() {
      var firstnameInput = document.getElementById("first_name").value;
      var lastnameInput = document.getElementById("last_name").value;
      var contactnumberInput = document.getElementById("contact_number").value;
      var emergencycontactnumberInput = document.getElementById("emergency_contact_number").value;
      var OfficeEmailInput = document.getElementById("office_email").value;
      var PersonalEmailInput = document.getElementById("personal_email").value;
      var hiredateInput = document.getElementById("hire_date").value;
      var startdateInput = document.getElementById("start_date").value;
      var imageInput = document.getElementById("emp_image").value;
     
      if (firstnameInput.trim() == "") {
          document.getElementById("firstnameError").style.display = "block";
      } 
      if (lastnameInput.trim() == "") {
          document.getElementById("lastnameError").style.display = "block";
      } 
      if (contactnumberInput.trim() == "") {
          document.getElementById("contactnumberError").style.display = "block";
      }
      if (emergencycontactnumberInput.trim() == "") {
          document.getElementById("emergencycontactnumberError").style.display = "block";
      }
      if (OfficeEmailInput.trim() == "") {
          document.getElementById("OfficeEmailError").style.display = "block";
      }
      if (PersonalEmailInput.trim() == "") {
          document.getElementById("PersonalEmailError").style.display = "block";
      }
      if (hiredateInput.trim() == "") {
          document.getElementById("hireDateError").style.display = "block";
      }
      if (startdateInput.trim() == "") {
          document.getElementById("startDateError").style.display = "block";
      }
      if (imageInput.trim() == "") {
          document.getElementById("imageError").style.display = "block";
      }
      else {
          document.getElementById("employeecreation").submit();
      }
  }
</script>
</body>
</html>